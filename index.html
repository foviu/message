<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Confession</title>
    <style>
            html, body {
                margin: 0;
                padding: 0;
                max-width: 100vw;
                overflow-x: hidden;
                background-color: #121212;
                color: #fff;
                font-family: 'Segoe UI', sans-serif;
                text-align: center;
            }

            .container {
                background: rgba(255, 255, 255, 0.07);
                padding: 20px;
                border-radius: 15px;
                width: 90vw;
                max-width: 800px;
                margin: 60px auto;
                box-shadow: 0 0 30px rgba(255, 0, 100, 0.4);
                box-sizing: border-box;
            }

            h1 {
                font-size: 32px;
                margin-bottom: 20px;
            }

            button {
                padding: 12px 24px;
                background: #ff3366;
                border: none;
                border-radius: 10px;
                color: white;
                font-size: 18px;
                cursor: pointer;
                transition: background 0.3s;
                margin: 10px;
            }

            button:hover {
                background: #ff0055;
            }

            #love-message {
                margin-top: 20px;
                font-size: 20px;
                line-height: 1.6;
            }

            #video-container {
                margin-top: 30px;
                max-width: 100%;
            }

            #video-container iframe {
                width: 100%;
                height: auto;
                max-width: 100%;
            }

            #response-message {
                margin-top: 20px;
                font-size: 20px;
                color: #ff99cc;
            }

            #comment-section {
                margin-top: 20px;
            }

            #user-comment {
                width: 100%;
                max-width: 300px;
                padding: 12px 16px;
                border-radius: 12px;
                border: none;
                font-size: 18px;
                font-family: 'Segoe UI', sans-serif;
                resize: vertical;
                background-color: #222;
                color: #fff;
                box-shadow: 0 0 10px rgba(255, 51, 102, 0.5);
                transition: box-shadow 0.3s ease;
            }

            #user-comment:focus {
                outline: none;
                box-shadow: 0 0 15px rgba(255, 51, 102, 0.8);
            }

            #comment-section button {
                margin-top: 10px;
                padding: 12px 28px;
                background: #ff3366;
                border: none;
                border-radius: 12px;
                color: white;
                font-size: 18px;
                cursor: pointer;
                transition: background 0.3s ease;
            }

            #comment-section button:hover {
                background: #ff0055;
            }

            /* Heart drop animation */
            .hearts {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 0;
                opacity: 0.3;
            }

            .heart {
                position: absolute;
                color: #ff5eaa;
                animation: fall 6s linear infinite;
                font-size: 24px;
                opacity: 0.1;
            }

            @keyframes fall {
                0% {
                    transform: translateY(-100px) rotate(0deg);
                    opacity: 0;
                }
                50% {
                    opacity: 1;
                }
                100% {
                    transform: translateY(100vh) rotate(360deg);
                    opacity: 0;
                }
            }

            /* üì± Responsive for Mobile */
            @media (max-width: 600px) {
                .container {
                    padding: 20px;
                    margin: 50px 20px;
                }

                h1 {
                    font-size: 24px;
                }

                button {
                    font-size: 16px;
                    padding: 10px 20px;
                }

                #love-message {
                    font-size: 18px;
                }

                #response-message {
                    font-size: 18px;
                }

                #user-comment {
                    font-size: 16px;
                    padding: 10px 14px;
                }

                #comment-section button {
                    font-size: 16px;
                    padding: 10px 24px;
                }
            }
        </style>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ù§Ô∏è</text></svg>">
</head>
<body>
    <div class="hearts" id="hearts" style="display:none;"></div>

    <audio id="love-audio" autoplay hidden>
        <source src="https://www.dropbox.com/scl/fi/y8h2oeoq4zb99vfa80eub/Sn3.mp3?rlkey=ekjn7tcmdmajh99ll2qv6ljwb&raw=1" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    
    <div class="container">
        <h1>A Special Message for You üíå</h1>

        <button id="reveal-button" class="Buttox" onclick="revealConfession()">Click to Reveal</button>

<p id="love-message" style="display:none;">
    <b>
Hi Fay ü§ç,
I‚Äôve been meaning to send you this message for a while now.
I guess I was just scared‚Äî
scared of saying too much,
scared of losing you before I ever really had the chance.

I don‚Äôt mean to rush things,
but I couldn‚Äôt sleep last night.
It hit me that I don‚Äôt even know your last name,
or how you take your coffee.

And somehow,
those little things feel like the most important things in the world.
Like how your hair looks when it‚Äôs a little messy in the morning,
what makes you laugh until your stomach hurts,
or what still makes you laugh when you‚Äôre crying.

Any one of those things would be enough,
and all of them? That would be a dream.
I know it‚Äôs early,
and I know I barely know you,
but I couldn‚Äôt concentrate this morning.

I kept wondering about your favorite takeout,
or the quiet dreams you‚Äôve never shared‚Äî
the ones that live in the corners of your heart,
waiting to come true.

If I ever brought you flowers,
would you want them to be blue?

I know, I know‚Äî
we just met.
But your voice is in my head like a favorite song,
and I keep pressing repeat.

I might never say this out loud,
and maybe I should just sleep this off.
But the truth is‚Äî
anything that matters to you,
suddenly matters so much to me.
            <br>
   </b>
        <br>
    <a style="font-size: 75%;">
        I‚Äôve come to realize how quickly time passes,
        and summer break is just around the corner.
        I truly hope we can spend it together.
        </a>
    </p>

        <div id="response-buttons" style="display:none;">
            <button id="acceptedButtonx" onclick="acceptLove()">Yes, I feel the same ü§ç</button>
            <button id="rejectButtonx" onclick="rejectLove()">No, sorry</button>
            <br><br>
            <p style="color: aquamarine;"> Your response will be sent to the person how gave you this </p>
        </div>

        <p id="response-message" style="display:none;"></p>
        <div id="comment-section" style="display:none; margin-top: 20px;">
            <textarea id="user-comment" rows="4" cols="50" placeholder="Write your message here..."></textarea><br>
            <button onclick="sendComment()">Send Message</button>
            <p id="comment-status" style="color: lightgreen; margin-top:10px;"></p>
          </div>


        <div id="video-container" style="display:none;">
            <iframe width="1020" height="600" src="https://www.youtube.com/embed/amy2fttDCb8" 
                title="Love Video" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
        apiKey: "AIzaSyCShsOfOFzhw1iL18eT3UZfPN8AV_g2dc0",
        authDomain: "environment-monitor-e5ffe.firebaseapp.com",
        databaseURL: "https://environment-monitor-e5ffe-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "environment-monitor-e5ffe",
        storageBucket: "environment-monitor-e5ffe.firebasestorage.app",
        messagingSenderId: "51310062635",
        appId: "1:51310062635:web:3ddec9599ebb4d243dce6e",
        measurementId: "G-143MQVQX00"
        };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const visitRef = db.ref("visits");

  visitRef.once("value").then(snapshot => {
    let visits = snapshot.val() || 0;

            if (visits >= 2) {
                sendTelegramMessage(`üö´ Access Denied \nSomeone tried to access the page but was denied. \nTotal visits: ${visits}`);
                document.body.innerHTML = `
                <div class="container" style="margin-top: 100px;">
                    <h1 style="color:red;">üö´ Access Denied</h1>
                    <p style="color: #ccc;">This page has already been viewed ${visits} times.</p>
                    <p style="color: #aaa;">You can still leave a final message:</p>

                    <div id="comment-section">
                        <textarea id="user-comment" rows="4" cols="50" placeholder="Write your message here..."></textarea><br>
                        <button onclick="sendFinalComment()">Send Message</button>
                        <p id="comment-status" style="margin-top:10px;"></p>
                    </div>
                </div>
                `;
            } else {
            visitRef.set(visits + 1);
            console.log("Visit allowed:", visits + 1);
            }
        }).catch(err => {
            document.body.innerHTML = "<h1>üî• Firebase Error</h1><p>" + err + "</p>";
        });

        let rejectionCount = 0;
        let acceptedCount = 0;
        const TELEGRAM_TOKEN = "7104038985:AAEtKI2A-P4G3klsFNbLFr08RZs-UgI2UEY";
        const CHAT_ID = "974527711"; // 974527711

        function sendTelegramMessage(text) {
            const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;

            fetch(url, {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: text
                })

            }).catch(error => {
                console.error("Telegram error:", error);
            });
        }

        window.onload = function () {
            fetch('https://api.country.is/')
                .then(response => response.json())
                .then(data => {
                    const ip = data.ip;
                    const country = data.country;
                    sendTelegramMessage(`üì® Someone just opened the page!\nüåê IP: ${ip} \nüèõÔ∏è Country: ${country} `);
                })
                .catch(error => {
                    console.error("Error fetching IP:", error);
                    sendTelegramMessage("üì® Someone just opened the page!\n‚ö†Ô∏è Failed to get IP.");
                });
                
        };


        function sendFinalComment() {
            const comment = document.getElementById("user-comment").value.trim();
            const status = document.getElementById("comment-status");

            if (!comment) {
                status.style.color = "red";
                status.innerText = "Please write something before sending.";
                return;
            }

            sendTelegramMessage("üõë Final comment on Access Denied page:\n" + comment);
            
            status.style.color = "lightgreen";
            status.innerText = "Message sent, thank you!";
            document.getElementById("user-comment").value = "";
        }


        function revealConfession() {
            document.getElementById("love-message").style.display = "block";
            document.getElementById("response-buttons").style.display = "block";
            document.getElementById("hearts").style.display = "block";

            const audio = document.getElementById("love-audio");
            audio.volume = 0.2;
            audio.play().catch(err => {
                console.warn("Autoplay blocked:", err);
            });

            const revealButton = document.getElementById("reveal-button");
            revealButton.innerText = "Click to Stop Music";
            revealButton.onclick = stopMusic;
            revealButton.style.backgroundColor = "orange";
            revealButton.style.opacity = "0.2";
            sendTelegramMessage("She just reveal the text and the music is On‚ö†Ô∏è");
        }


        function stopMusic() {
            const audio = document.getElementById("love-audio");
            audio.pause();
            audio.currentTime = 0;

            const revealButton = document.getElementById("reveal-button");
            revealButton.innerText = "Click to Play Music Again";
            revealButton.style.backgroundColor = "Green";
            revealButton.style.opacity = "0.2";
            revealButton.onclick = revealConfession;
            sendTelegramMessage("She just Stop the music");
        }


        function acceptLove() {
            acceptedCount++;

            const message = document.getElementById("response-message");
            message.style.display = "block";

        if (acceptedCount === 1) {
            message.innerText = "Are you sure? üòÅ";
            sendTelegramMessage("ü§ç She clicked Accept. Asking for confirmation.");

        } else if (acceptedCount >= 2) {
            document.getElementById("response-message").innerText = "Someone is going to be very happy because of you. And as a way to repay this beautiful gesture, I‚Äôll do my best to make you happy for the rest of your life. ‚ù§Ô∏è";
            document.getElementById("response-message").style.display = "block";
            document.getElementById("video-container").style.display = "block";
            document.getElementById("comment-section").style.display = "block";
            document.getElementById("response-buttons").style.display = "none";
            sendTelegramMessage("‚úÖ She accepted the confession! ‚ù§Ô∏è");

            }
        }

        function rejectLove() {
            rejectionCount++;

            const message = document.getElementById("response-message");
            message.style.display = "block";

            if (rejectionCount === 1) {
                message.innerText = "Are you sure? üò¢";
                sendTelegramMessage("‚ö†Ô∏è She clicked reject. Asking for confirmation.");
            } else if (rejectionCount >= 2) {
                message.innerText = " Thank you for reading ‚ù§Ô∏è\nWishing you happiness.";
                document.getElementById("video-container").style.display = "none";
                document.getElementById("comment-section").style.display = "block";
                document.getElementById("response-buttons").style.display = "none";
                sendTelegramMessage("‚ùå She confirmed the rejection. üíîüíî");
            }
        }

        function sendComment() {
            const comment = document.getElementById("user-comment").value.trim();
            const status = document.getElementById("comment-status");
            if (comment.length === 0) {
                status.style.color = "red";
                status.innerText = "Please write a message before sending.";
                return;
            }
            sendTelegramMessage("üí¨ User comment: " + comment);
            status.style.color = "lightgreen";
            status.innerText = "Message sent, thank you!";
            document.getElementById("user-comment").value = "";
        }


        const heartsContainer = document.getElementById("hearts");
        function createHeart() {
            const heart = document.createElement("div");
            heart.classList.add("heart");
            heart.innerHTML = "‚ù§Ô∏è‚Äçüî•";
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.animationDuration = (Math.random() * 3 + 3) + "s";
            heart.style.fontSize = (Math.random() * 10 + 15) + "px";
            heartsContainer.appendChild(heart);
            setTimeout(() => heart.remove(), 6000);
        }

        setInterval(createHeart, 300);
        </script>
    </body>
</html>
